!function(){function o(o,t){o.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/profile",{templateUrl:"/profile/profile.view.html",controller:"profileCtrl",controllerAs:"vm"}).when("/appointment",{templateUrl:"/appointment/appointment.view.html",controller:"appointmentCtrl",controllerAs:"vm"}).when("/appointment/new",{templateUrl:"/appointment/addappointment.view.html",controller:"appointmentCtrl",controllerAs:"vm"}).when("/doctor",{templateUrl:"/admin/doctor/doctor.view.html",controller:"doctorCtrl",controllerAs:"vm"}).when("/doctor/new",{templateUrl:"/admin/doctor/add_doctor.view.html",controller:"insertdoctorCtrl",controllerAs:"vm"}).when("/update",{templateUrl:"/admin/doctor/update.view.html",controller:"updateDoctorCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}function t(o,t,e){o.$on("$routeChangeStart",function(o,n,r){"/profile"!==t.path()||e.isLoggedIn()||t.path("/")})}angular.module("meanApp",["ngRoute"]),angular.module("meanApp").config(["$routeProvider","$locationProvider",o]).run(["$rootScope","$location","authentication",t])}(),function(){function o(o,t,e,n,r){var i=this;i.appointments=[],i.currentPage=0,i.pageSize=3,i.user={},i.logout=function(){alert("clicked"),console.log("logout"),t.logout(),o.path("/login")},i.numberOfPages=function(){return Math.ceil(i.appointments.length/i.pageSize)},console.log("hello"),e.get("/api/appointment",{headers:{Authorization:"Bearer "+t.getToken()}}).success(function(o){i.appointments=o,console.log(i.appointments)}).error(function(o){console.log(o)}),n.redirectAddApp=function(){o.path("/appointment/new")},n.onSub=function(){return console.log("Hey there"),console.log(n.newAppointment),n.errorMessages=[],void 0==n.newAppointment.date||void 0==n.newAppointment.time||void 0==n.newAppointment.complain||""==n.newAppointment.complain?void n.errorMessages.push("All three fields are requied!"):(n.newAppointment.complain.length<10&&n.errorMessages.push("Complain must be at least 10 characters long!"),n.newAppointment.date<new Date&&n.errorMessages.push("You can only add a future appointment!"),(8>n.newAppointment.time.getHours()||n.newAppointment.time.getHours()>16)&&n.errorMessages.push("Appointment must be between 8am and 5pm!"),void e.post("/api/appointment/new",n.newAppointment).success(function(t){console.log("Success"),o.path("/appointment")}).error(function(o){console.error("error in inserting data",o)}))}}var t=angular.module("meanApp").controller("appointmentCtrl",o);o.$inject=["$location","authentication","$http","$scope","meanData"],t.filter("startFrom",function(){return function(o,t){return t=+t,o.slice(t)}})}(),function(){function o(){console.log("Home controller is running")}angular.module("meanApp").controller("homeCtrl",o)}(),function(){function o(o,t,e){var n=this;n.user={},n.logout=function(){e.logout(),o.path("login")},t.getProfile().success(function(o){n.user=o,console.log(n.user)}).error(function(o){console.log(o)})}angular.module("meanApp").controller("profileCtrl",o),o.$inject=["$location","meanData","authentication"]}();var app=angular.module("meanApp");app.controller("doctorCtrl",["$location","authentication","$http","$scope","meanData",function(o,t,e,n,r){var i=this;i.doctors=[],i.currentPage=0,i.pageSize=3,i.user={},i.logout=function(){alert("clicked"),console.log("logout"),t.logout(),o.path("/login")},i.numberOfPages=function(){return Math.ceil(i.doctors.length/i.pageSize)},console.log("hello"),e.get("/api/admin/doctor").success(function(o){i.doctors=o,console.log(i.doctors)}).error(function(o){console.log(o)}),n.redirectAddDoctor=function(){o.path("doctor/new")},i.store=function(t){sessionStorage.doctor=JSON.stringify(t),o.path("update")},i["delete"]=function(o){e.post("/api/admin/doctor/delete",{doctor_email:o.doctor_email}).success(function(o){console.log("response..",o),window.location.reload(!0)}).error(function(o){console.log("error..",o)})}}]),app.controller("insertdoctorCtrl",["$http","authentication","$location",function(o,t,e){console.log("add doctor controller is running...");var n=this;n.doctor={doctor_name:"",doctor_email:"",speciality:""},n.onSubmit=function(){console.log("Submitting new form"),console.log(n.doctor),o.post("/api/admin/doctor/new",n.doctor).success(function(o){console.log("response..",o),alert("Registered Successfully!!!"),e.path("doctor")}).error(function(o){console.log("error..",o),alert("Duplicate Email!!!")})}}]),app.controller("updateDoctorCtrl",["$http","authentication","$location",function(o,t,e){console.log("update doctor controller is running...");var n=this,r=JSON.parse(sessionStorage.doctor);n.doctor={doctor_name:r.doctor_name,doctor_email:r.doctor_email,speciality:r.speciality},n.onSubmit=function(){console.log("Submitting new form"),o.post("/api/admin/doctor/update",n.doctor).success(function(o){alert("Updated Successfully!!!"),console.log("response..",o),e.path("doctor")}).error(function(o){console.log("error..",o),alert("Duplicate Email!!!")})}}]),app.filter("startFrom",function(){return function(o,t){return t=+t,o.slice(t)}}),function(){function o(o,t,e){var n=this;n.credentials={name:"",email:"",password:""},n.onSubmit=function(){e.errorMessages=[],e.vm.credentials.password.length<8&&e.errorMessages.push("Password must be atleast 8 characters long...Atleast 1 Alphabet! .... 1 Number...1 Special Character"),console.log("Submitting registration"),t.register(n.credentials).error(function(o){alert("Duplicate Email!!!")}).success(function(o){alert("Registered Successfully!!!")}).then(function(){o.path("profile")})};var r=new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"),i=new RegExp("^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})");e.checkpwdStrength={width:"150px",height:"25px","float":"right"},e.validationInputPwdText=function(o){r.test(o)?e.checkpwdStrength["background-color"]="green":i.test(o)?e.checkpwdStrength["background-color"]="orange":e.checkpwdStrength["background-color"]="red"}}angular.module("meanApp").controller("registerCtrl",o),o.$inject=["$location","authentication","$scope"]}(),function(){function o(o,t){var e=this;e.credentials={email:"",password:""},e.onSubmit=function(){t.login(e.credentials).error(function(o){console.log(o),alert("Login Failed!!!")}).then(function(){console.log("login sucessfull"),alert("Login Successful");var e=t.currentUser();console.log(e.email),"admin@healthcare.com"==e.email?o.path("doctor"):(sessionStorage.user=JSON.stringify(e),o.path("/appointment"))})}}angular.module("meanApp").controller("loginCtrl",o),o.$inject=["$location","authentication"]}(),function(){function o(o,t){var e=function(o){t.localStorage["mean-token"]=o},n=function(){return t.localStorage["mean-token"]},r=function(){var o,e=n();return!!e&&(o=e.split(".")[1],o=t.atob(o),o=JSON.parse(o),o.exp>Date.now()/1e3)},i=function(){if(r()){var o=n(),e=o.split(".")[1];return e=t.atob(e),e=JSON.parse(e),{email:e.email,name:e.name}}};return register=function(t){return o.post("/api/register",t).success(function(o){sessionStorage.user=JSON.stringify(t),e(o.token)})},login=function(t){return o.post("/api/login",t).success(function(o){console.log(o.token),e(o.token)})},logout=function(o){t.localStorage.removeItem("mean-token")},{currentUser:i,saveToken:e,getToken:n,isLoggedIn:r,register:register,login:login,logout:logout}}angular.module("meanApp").service("authentication",o),o.$inject=["$http","$window"]}(),function(){function o(o,t){var e=function(){return console.log("getting profile"),o.get("/api/profile",{headers:{Authorization:"Bearer "+t.getToken()}})};return{getProfile:e}}angular.module("meanApp").service("meanData",o),o.$inject=["$http","authentication"]}(),function(){function o(o,t){var e=this;e.isLoggedIn=t.isLoggedIn(),e.currentUser=t.currentUser()}angular.module("meanApp").controller("navigationCtrl",o),o.$inject=["$location","authentication"]}(),function(){function o(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("meanApp").directive("navigation",o)}();
//# sourceMappingURL=app.min.js.map
